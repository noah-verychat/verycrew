<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>VeryCrew for VeryHunt</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.maptiler.com/maptiler-sdk-js/v3.9.0/maptiler-sdk.css" rel="stylesheet" />
<script src="https://cdn.maptiler.com/maptiler-sdk-js/v3.9.0/maptiler-sdk.umd.min.js"></script>
<style>
  body,html{margin:0;padding:0;height:100%;overflow:hidden;font-family:'Malgun Gothic',sans-serif;}
  header{position:fixed;top:0;left:0;right:0;height:68px;background:white;box-shadow:0 3px 15px rgba(0,0,0,.15);z-index:9999;display:flex;align-items:center;justify-content:center;gap:60px;}
  .tab-btn{background:none;border:none;font-size:18px;font-weight:600;color:#666;cursor:pointer;padding:10px 20px;}
  .tab-btn.active{color:#ff3366!important;font-weight:700!important;border-bottom:4px solid #ff3366!important;}
  #map{width:100%;height:calc(100vh-68px);margin-top:68px 0 0 0;}
  #lineupPanel{display:none;position:absolute;top:68px;left:0;right:0;bottom:0;background:white;overflow:auto;padding:20px;box-sizing:border-box;z-index:100;}
  #lineupTable{width:100%;border-collapse:collapse;font-size:15px;}
  #lineupTable th,#lineupTable td{border:1px solid #ddd;padding:10px;text-align:center;}
  #lineupTable th{background:#ff3366;color:white;position:sticky;top:0;z-index:10;}
  #saveBtn{position:fixed;top:80px;right:20px;z-index:1000;padding:12px 28px;background:#ff3366;color:white;border:none;border-radius:12px;font-size:16px;cursor:pointer;display:none;box-shadow:0 4px 12px rgba(255,51,102,.4);}
  #saveBtn:hover{background:#e62e5a;}
  .modal{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.7);align-items:center;justify-content:center;}
  .modal-content{background:white;padding:25px;width:90%;max-width:700px;border-radius:16px;max-height:90vh;overflow:auto;}
  .close-btn{float:right;font-size:28px;color:#ff3366;cursor:pointer;font-weight:bold;}
  .invite-btn{background:#ff69b4;color:white;border:none;padding:8px 16px;border-radius:8px;cursor:pointer;font-size:14px;margin-top:8px;}
  .logo-img{width:90px;height:90px;object-fit:cover;border-radius:12px;border:3px solid #ff3366;margin-bottom:10px;}
</style>
</head>
<body>

<header>
  <img src="https://i.imgur.com/4G2AsbN.png" style="height:48px;border-radius:12px;">
  <nav>
    <button id="tabMap" class="tab-btn active">Map</button>
    <button id="tabLineup" class="tab-btn">Lineup</button>
  </nav>
</header>

<div id="map"></div>

<div id="lineupPanel">
  <h2 style="text-align:center;color:#ff3366;margin-bottom:20px;">VeryCrew Lineup – 자유 편집 & 저장</h2>
  <table id="lineupTable">
    <thead>
      <tr><th>번호</th><th>상호명</th><th>대표자</th><th>연락처</th><th>주소</th><th>상태</th><th>비고</th></tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>

<button id="saveBtn">저장하기 (엑셀)</button>

<div id="modalOverlay" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="document.getElementById('modalOverlay').style.display='none'">×</span>
    <h3 id="modalTitle" style="color:#ff3366;text-align:center;"></h3>
    <div id="invitedList" style="margin-top:15px;"></div>
  </div>
</div>

<script>
maptilersdk.config.apiKey = 'wlAGSeTuUCbvwxWtQtEi';

const map = new maptilersdk.Map({
  container: 'map',
  style: maptilersdk.MapStyle.STREETS,
  center: [128.0, 36.0],
  zoom: 7
});
// ★★★ 여기부터 107개 실제 데이터 ★★★
const stores = [
  {"uid":1,"country":"korea","store_name":"주.에스아이셀센터","owner_name":"윤차식","phone":"821038879451.0","address":"경남 진주시 동부로169번길 12 B동 502호","latitude":35.16488185,"longitude":128.1272793,"logo_url":"https://imgur.com/s6SNXa3","verychat_id":"Yoon8301cs","invited":null,"L":null},
  {"uid":2,"country":"korea","store_name":"(주)여행조아","owner_name":"유정은","phone":"821063002523.0","address":"경남 진주시 남강로 597-1","latitude":35.19047609,"longitude":128.0770643,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"jeong78","invited":"Yoon8301cs","L":null},
  {"uid":3,"country":"korea","store_name":"안여정남성컷트전문점","owner_name":"안여정","phone":"821036564255.0","address":"경남 진주시 호탄길 22번길 4 (수경빌딩 1층)","latitude":35.1632,"longitude":128.116617,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"d6672569A","invited":"Yoon8301cs","L":null},
  {"uid":4,"country":"korea","store_name":"레노마홈 진주정촌점","owner_name":"김수재","phone":"821058834929.0","address":"경남 진주시 정촌면 삼일로 122번길 9-15","latitude":35.129794,"longitude":128.1031,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"sjk1004","invited":"Yoon8301cs","L":null},
  {"uid":5,"country":"korea","store_name":"동건채","owner_name":"김성규","phone":"821058794929.0","address":"진주시 정촌면 삼일로 12번길 9-15","latitude":35.12983,"longitude":128.103159,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"dgc6678","invited":"Yoon8301cs","L":null},
  {"uid":6,"country":"korea","store_name":"제일컴퓨터세탁","owner_name":"서인석","phone":"821073754917.0","address":"경남 진주시 진양호로 389(신안동)","latitude":35.183426,"longitude":128.065713,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"kaya3483","invited":"Yoon8301cs","L":null},
  {"uid":7,"country":"korea","store_name":"BOOM WASH(붐워시)","owner_name":"안정판","phone":"821036192998.0","address":"경남 진주시 삼일로 122 26(정촌면) 붐워시","latitude":35.128592,"longitude":128.102826,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"an2998","invited":"Yoon8301cs","L":null},
  {"uid":8,"country":"korea","store_name":"맥아더","owner_name":"이두기","phone":"821041327279.0","address":"경남 진주시 진주대로 1040번길 3","latitude":35.192598,"longitude":128.084902,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"lkh9066","invited":"Yoon8301cs","L":null},
  {"uid":9,"country":"korea","store_name":"자연농부","owner_name":"조미정","phone":"821028319098.0","address":"경남 진주시 호탄동 860-1","latitude":35.15761,"longitude":128.114315,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Jung9098","invited":"Yoon8301cs","L":null},
  {"uid":10,"country":"korea","store_name":"주식회사 서강","owner_name":"강지원","phone":"821045713006.0","address":"경남 진주시 가호방아길 52-49","latitude":35.158215,"longitude":128.114208,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"SEOkang2002","invited":"Yoon8301cs","L":null},
  {"uid":11,"country":"korea","store_name":"더나눔트레이딩","owner_name":"박종무","phone":"821023670650.0","address":"경남 진주시 문산읍 소문리 17번길 13-2","latitude":35.171734,"longitude":128.163977,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"nanum1004","invited":"Yoon8301cs","L":null},
  {"uid":12,"country":"korea","store_name":"진주계란","owner_name":"김진규","phone":"821093439993.0","address":"경남 진주시 향교로 33","latitude":35.198356,"longitude":128.086141,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"wls930","invited":"Yoon8301cs","L":null},
  {"uid":13,"country":"korea","store_name":"한글컴퓨터","owner_name":"이영만","phone":"821091183492.0","address":"서울시 도봉구 도봉로 156길30 2층 202","latitude":37.67256,"longitude":127.045851,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ds1jap","invited":null,"L":null},
  {"uid":14,"country":"korea","store_name":"포훤","owner_name":"이혜진","phone":"821038102068.0","address":"경기도 동두천시 동광로 298","latitude":37.910383,"longitude":127.055469,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"hyejinlee","invited":"ds1jap","L":null},
  {"uid":15,"country":"korea","store_name":"다해에어컨","owner_name":"배병간","phone":"821032585681.0","address":"인천시 남동구 구월말로 3번길 30","latitude":37.449451,"longitude":126.722582,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"B3258b","invited":"ds1jap","L":null},
  {"uid":16,"country":"korea","store_name":"월드김","owner_name":"김옥일","phone":"821063454990.0","address":"인천시 남동구 수산동 131번지","latitude":37.437775,"longitude":126.723679,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"K63454990k","invited":"ds1jap","L":null},
  {"uid":17,"country":"korea","store_name":"백조","owner_name":"윤영호","phone":"821072665030.0","address":"대전시 중구 유천로45-1 2층","latitude":36.316679,"longitude":127.397796,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"atomy605","invited":"ds1jap","L":null},
  {"uid":18,"country":"korea","store_name":"열린보청기","owner_name":"김무경","phone":"821063851830.0","address":"서울시 도봉구 도봉로739 1층","latitude":37.670552,"longitude":127.043386,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"mukyung","invited":"ds1jap","L":null},
  {"uid":19,"country":"korea","store_name":"삼일공업사","owner_name":"이용화","phone":"821091019943.0","address":"서울특별 도봉구 도봉로154길 6","latitude":37.671126,"longitude":127.0444,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"younghwa","invited":"ds1jap","L":null},
  {"uid":20,"country":"korea","store_name":"인쇄대영사","owner_name":"김재덕","phone":"821034134950.0","address":"서울특별시 도봉구 도봉로155길 4","latitude":37.672973,"longitude":127.043827,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Kimjaeduck","invited":"ds1jap","L":null},
  {"uid":21,"country":"korea","store_name":"오토그린자동차","owner_name":"윤석현","phone":"821052857266.0","address":"서울특별시 도봉구 도봉로154길 33","latitude":37.671355,"longitude":127.045942,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ysh8204","invited":"ds1jap","L":null},
  {"uid":22,"country":"korea","store_name":"오땡큐염색방","owner_name":"권순남","phone":"821091232774.0","address":"서울특별시 도봉구 도봉로156길 23-2 1층","latitude":37.672801,"longitude":127.045846,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"soonnam","invited":"ds1jap","L":null},
  {"uid":23,"country":"korea","store_name":"양지인쇄","owner_name":"황미숙","phone":"821031370160.0","address":"서울특별시 도봉구 도당로 86","latitude":37.665134,"longitude":127.036661,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Yzipt1","invited":"ds1jap","L":null},
  {"uid":24,"country":"korea","store_name":"사계절","owner_name":"송동현","phone":"821049493042.0","address":"경기도 광명시 옥길동 404-1","latitude":37.465211,"longitude":126.832313,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"dhs2066sw","invited":"ds1jap","L":null},
  {"uid":25,"country":"korea","store_name":"리움공인중개사","owner_name":"이태구","phone":"821055990973.0","address":"서울특별 서초구 사임당로21 103호(서초동)","latitude":37.487969,"longitude":127.012527,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ouger0000","invited":"ds1jap","L":null},
  {"uid":26,"country":"korea","store_name":"포천 세스바이오 포천점","owner_name":"오세원","phone":"821052182297.0","address":"경기도 포천시 호국로 1161","latitude":37.86687,"longitude":127.174991,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ecobooster530","invited":"ds1jap","L":null},
  {"uid":27,"country":"korea","store_name":"코리아국제인력","owner_name":"정종수","phone":"821037147353.0","address":"서울특별시 서초구 서초대로 49길4 5층","latitude":37.493804,"longitude":127.01238,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"jungjs","invited":"ds1jap","L":null},
  {"uid":28,"country":"korea","store_name":"오리궁뎅이체인본부","owner_name":"조춘익","phone":"821042242786.0","address":"광주광역시 남구 봉주2길 34","latitude":35.13947,"longitude":126.890972,"logo_url":"https://imgur.com/s6SNXa3","verychat_id":"wh7601","invited":null,"L":null},
  {"uid":29,"country":"korea","store_name":"오리궁뎅이 백운점","owner_name":"신승현 ","phone":"821024733548.0","address":"광주광역시 남구 백운로 72-1","latitude":35.139618,"longitude":126.906176,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Likelike9900","invited":"wh7601","L":null},
  {"uid":30,"country":"korea","store_name":"오리궁뎅이 화정점","owner_name":"최수철","phone":"821064747960.0","address":"광주광역시 서구 월드컵4강로40-1","latitude":35.140867,"longitude":126.875938,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Cchoi2457","invited":"wh7601","L":null},
  {"uid":31,"country":"korea","store_name":"뉴욕네일","owner_name":"조정화","phone":"821063602786.0","address":"광주광역시 서구 염화로 103 825-12 뉴욕네일","latitude":35.143061,"longitude":126.875743,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Ahwlfll1930","invited":"wh7601","L":null},
  {"uid":32,"country":"korea","store_name":"무등소갈비 고창점","owner_name":"이광학","phone":"821056787017.0","address":"전북특별자치도 고창군 고창읍 중앙로 281","latitude":35.43514,"longitude":126.706445,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"http0528","invited":"wh7601","L":null},
  {"uid":33,"country":"korea","store_name":"고집쟁이 족발","owner_name":"김민구","phone":"821023789742.0","address":"광주광역시 남구 백운로 56","latitude":35.138291,"longitude":126.906542,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"minkoo007","invited":"wh7601","L":null},
  {"uid":34,"country":"korea","store_name":"오리궁뎅이 첨단점","owner_name":"나승남","phone":"821041918614.0","address":"광주광역시 광산구 임방울대로800번길72 114호","latitude":35.21429,"longitude":126.845544,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"na8614","invited":"wh7601","L":null},
  {"uid":35,"country":"korea","store_name":"구라포차 ","owner_name":"정규태 ","phone":"82199040700.0","address":"부산광역시 사상구 주례로10번길 9","latitude":35.15013781,"longitude":129.010782,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"256800","invited":null,"L":null},
  {"uid":36,"country":"korea","store_name":"주식회사 엑셀리온","owner_name":"김성현","phone":"821045611871.0","address":"부산광역시 영도구 태종로 727, 1110호 해양대학교 산학허브관","latitude":35.073347,"longitude":129.082186,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"wander13","invited":"256800","L":null},
  {"uid":37,"country":"korea","store_name":"헬로우빈","owner_name":"정유진","phone":"821084561436.0","address":"부산광역시 사상구 가야대로306 헬로우빈","latitude":35.150342,"longitude":129.006122,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"z0032","invited":"256800","L":null},
  {"uid":38,"country":"korea","store_name":"신아윈텍","owner_name":"장훈철","phone":"821026714342.0","address":"부산광역시 강서구 대저중앙로348번길20(대저1동)","latitude":35.220223,"longitude":128.984295,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Dcf1207","invited":"256800","L":null},
  {"uid":39,"country":"korea","store_name":"(주)기현","owner_name":"서상수","phone":"821088849684.0","address":"인천광역시 연수구 청학로5번길 18, 101호(청학동)","latitude":37.427788,"longitude":126.662401,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Soo191010","invited":null,"L":null},
  {"uid":40,"country":"korea","store_name":"R&C 디자인","owner_name":"김종혁","phone":"821027409599.0","address":"인천광역시 부평구 새벌로 29, 부평테크노타워 612호","latitude":37.519641,"longitude":126.715589,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"deafsky","invited":"Soo191010","L":null},
  {"uid":41,"country":"korea","store_name":"티지세라믹","owner_name":"김태선 ","phone":"821023274605.0","address":"인천광역시 서구 심곡로 135번지 대동아파트 103동804호","latitude":37.545326,"longitude":126.680677,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ktss","invited":"Soo191010","L":null},
  {"uid":42,"country":"korea","store_name":"티에스조명","owner_name":"장진태","phone":"821087337031.0","address":"경기도 오산시 외삼미로 151","latitude":37.198468,"longitude":127.061735,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"chcht","invited":"Soo191010","L":null},
  {"uid":43,"country":"korea","store_name":"낭만닭터","owner_name":"조용공","phone":"821054336868.0","address":"대구광역시 동구 아양로9길 6-2","latitude":35.882772,"longitude":128.619038,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"7pihunter7","invited":null,"L":null},
  {"uid":44,"country":"korea","store_name":"해피모먼트","owner_name":"박경원","phone":"821042249191.0","address":"충남 아산시 번영로 169번길12 1층 해피모먼트","latitude":36.786168,"longitude":127.009875,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"happymoment","invited":null,"L":null},
  {"uid":45,"country":"korea","store_name":"한국재활심리상담센터","owner_name":"김상훈","phone":"821025358716.0","address":"제주특별자치도 동광로 131, 일도클리닉 702호","latitude":33.507907,"longitude":126.540573,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"kprcc19","invited":null,"L":null},
  {"uid":46,"country":"korea","store_name":"좋은이불","owner_name":"김순자","phone":"821072488910.0","address":"경남 합천군 합천읍 동서로 70","latitude":35.567011,"longitude":128.159954,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Ksj9480sla ","invited":null,"L":null},
  {"uid":47,"country":"korea","store_name":"태영주차장","owner_name":"박태영","phone":"821035931065.0","address":"부산광역시 북구 만덕동 845-1","latitude":35.208727,"longitude":129.037037,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"SUSI8864","invited":null,"L":null},
  {"uid":48,"country":"korea","store_name":"굿모닝 사우나커트","owner_name":"김현곤","phone":"821064500721.0","address":"진주시 금산면 금산순환로22번길 4 굿모닝사우나 남탕","latitude":35.215912,"longitude":128.147279,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"khg0721","invited":null,"L":null},
  {"uid":49,"country":"korea","store_name":"GS25수원파크점","owner_name":"최인락","phone":"821033493369.0","address":"경기도 수원시 권선구 권선로699번길17 101호","latitude":37.259736,"longitude":127.027908,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"cil5542","invited":null,"L":null},
  {"uid":50,"country":"korea","store_name":"워시테리아 봉담점","owner_name":"김동화","phone":"821093662763.0","address":"경기도 화성시 봉담읍 와우안길 74-1","latitude":37.21775,"longitude":126.975063,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"powerski","invited":null,"L":null},
  {"uid":51,"country":"korea","store_name":"셀럽스터디","owner_name":"고경준","phone":"821087417863.0","address":"경기도 양주시 옥정동 1024-6 아이테크엠 지식산업단지 5층 507호","latitude":37.83318,"longitude":127.101613,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"tc8863","invited":null,"L":null},
  {"uid":52,"country":"korea","store_name":"황금비앤채","owner_name":"이상원","phone":"821030353356.0","address":"인천 부평구 동수북로 162 명성빌딩 501호","latitude":37.48880286,"longitude":126.7241476,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"sang5282 ","invited":null,"L":null},
  {"uid":53,"country":"korea","store_name":"엠에이치산업","owner_name":"권구범","phone":"821093386271.0","address":"경북 영천시 중앙동1길 102-10 대동다숲 104동 1901호","latitude":35.975785,"longitude":128.931265,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"kwongu0630 ","invited":null,"L":null},
  {"uid":54,"country":"korea","store_name":"업툰","owner_name":"손석진","phone":"821046079991.0","address":"전남 나주시 빛가람로 741 205","latitude":35.02152536,"longitude":126.7929875,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"rhkswo77","invited":null,"L":null},
  {"uid":55,"country":"korea","store_name":"탐탐뮤직스튜디오","owner_name":"안현대","phone":"82199016226.0","address":"울산광역시 중구 곽남14길29 1층 탐탐뮤직스튜디오","latitude":35.570656,"longitude":129.342307,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"magrock","invited":null,"L":null},
  {"uid":56,"country":"korea","store_name":"비엔비골프연습장","owner_name":"김왕수","phone":"821067271403.0","address":"부산 강서구 명지오션시티4로 81 세정프라자 7층","latitude":35.0816972,"longitude":128.9039617,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ghdtnk","invited":null,"L":null},
  {"uid":57,"country":"korea","store_name":"진영주차장","owner_name":"윤은배","phone":"821065739176.0","address":"부산 서구 충무시장길 17","latitude":35.09571881,"longitude":129.023747,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ebsvk0305","invited":null,"L":null},
  {"uid":58,"country":"korea","store_name":"캐슬리빙텔","owner_name":"조수민","phone":"821085116393.0","address":"경기 용인시 수지구 죽전로168번길 3-1 캐슬프라자 701, 702호","latitude":37.32601366,"longitude":127.1253576,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"jamesdeanjo75","invited":null,"L":null},
  {"uid":59,"country":"korea","store_name":"맨즈클럽","owner_name":"허식","phone":"821034649459.0","address":"수원시 권선구 금곡동240-27 맨즈클럽","latitude":37.269846,"longitude":126.957724,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Gaboja00","invited":null,"L":null},
  {"uid":60,"country":"korea","store_name":"세덴 정발산점","owner_name":"손기호","phone":"821063810400.0","address":"경기 고양시 일산동구 마두동844-6 세덴","latitude":37.66585,"longitude":126.784451,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"skh859","invited":null,"L":null},
  {"uid":61,"country":"korea","store_name":"암산왕주산학원","owner_name":"김태수","phone":"821076461166.0","address":"부산 연제구 거제시장로22번길 76","latitude":35.18431469,"longitude":129.0731605,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"Kskim123","invited":null,"L":null},
  {"uid":62,"country":"korea","store_name":"벽산명품세탁소","owner_name":"송인덕","phone":"821035180042.0","address":"부산광역시 사하구 하신중앙로 265가 가락타운3단지상가1층128호 벽산명품세탁소","latitude":35.101631,"longitude":128.959433,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"ssid7080","invited":null,"L":null},
  {"uid":63,"country":"korea","store_name":"해달양꼬치","owner_name":"이광주","phone":"821098960128.0","address":"경기도 남양주 진접읍 봉현로 24 1층","latitude":37.715894,"longitude":127.180393,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"lgz421","invited":null,"L":null},
  {"uid":64,"country":"korea","store_name":"신내홈플안경원","owner_name":"박재범","phone":"821026195579.0","address":"서울특별시 중랑구 신내로225 디아뜨겔러리 1층 129호","latitude":37.616873,"longitude":127.091573,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"bumi72","invited":null,"L":null},
  {"uid":65,"country":"korea","store_name":"모던안경 ","owner_name":"채인","phone":"821039961001.0","address":"서울특별 성동구 성덕정길 89","latitude":37.53788999,"longitude":127.0535009,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"ci0514ci ","invited":null,"L":null},
  {"uid":66,"country":"korea","store_name":"아우성생오리","owner_name":"이도련","phone":"821077543661.0","address":"경남 양산시 평산6길 15","latitude":35.38305727,"longitude":129.1510052,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"dlehfus1234LDR","invited":null,"L":null},
  {"uid":67,"country":"korea","store_name":"피씨마루","owner_name":"정대준","phone":"821090817845.0","address":"경기도 고양시 일산서구 대화동 2032-4 2층","latitude":37.682091,"longitude":126.758554,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"boss","invited":null,"L":null},
  {"uid":68,"country":"korea","store_name":"아낌없이","owner_name":"김경희","phone":"821044434255.0","address":"경기도수원시 장안구 송정로164","latitude":37.297772,"longitude":127.014675,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Chucky999","invited":null,"L":null},
  {"uid":69,"country":"korea","store_name":"인본푸드닥터","owner_name":"정대희","phone":"821083301711.0","address":"경기 화성시 노작로4길 5-26 1층","latitude":37.19764283,"longitude":127.0762402,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"timode","invited":null,"L":null},
  {"uid":70,"country":"korea","store_name":"넥스에이아이티","owner_name":"오현철","phone":"821054560478.0","address":"경남 김해시 주촌면 소망길88 경남테크노파크시험생산동1-202호","latitude":35.215545,"longitude":128.832852,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"K5111272","invited":null,"L":null},
  {"uid":71,"country":"korea","store_name":"511더치앤커피","owner_name":"이유경","phone":"821087233595.0","address":"부산광역시 동구 고관로 135","latitude":35.130389,"longitude":129.048099,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"aa8723","invited":null,"L":null},
  {"uid":72,"country":"korea","store_name":"이천억 해물이랑 고기랑","owner_name":"이한재","phone":"821037657134.0","address":"서울특별시 마포구 월드컵로 105, 1층(망원동)","latitude":37.55779,"longitude":126.90795,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Han7134","invited":null,"L":null},
  {"uid":73,"country":"korea","store_name":"구룡포일출과메기 포항","owner_name":"최현","phone":"821037107742.0","address":"경북 포항시 남구 해동로63","latitude":36.02497,"longitude":129.372666,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Aaa330766","invited":null,"L":null},
  {"uid":74,"country":"korea","store_name":"송월타올 포항송도점","owner_name":"전종수","phone":"821080193003.0","address":"포항시 남구 송도해안길112번길14-1","latitude":36.041511,"longitude":129.376595,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"jjs3003","invited":null,"L":null},
  {"uid":75,"country":"korea","store_name":"쁘앙송","owner_name":"김석권","phone":"821035956659.0","address":"광주광역시 서구 화정로 253번길 24-1 1층","latitude":35.149339,"longitude":126.882977,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Gabae3564","invited":null,"L":null},
  {"uid":76,"country":"korea","store_name":"살라뽀 salappo","owner_name":"Min","phone":"639154356973.0","address":"Panglao. bohol","latitude":9.55054,"longitude":123.77089,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"tesla5579","invited":null,"L":null},
  {"uid":77,"country":"korea","store_name":"컴홀릭","owner_name":"양창환","phone":"821047210050.0","address":"충남 천안시 서북구 부성6길 39-3 1층 101호","latitude":36.83605681,"longitude":127.1378707,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"Darami99","invited":null,"L":null},
  {"uid":78,"country":"korea","store_name":"세명아트","owner_name":"김석권","phone":"821035956659.0","address":"부산광역 부산진구 냉정로160번길 19-9","latitude":35.14886536,"longitude":127.1253576,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"5563ksgg","invited":null,"L":null},
  {"uid":79,"country":"korea","store_name":"NS실용음악학원","owner_name":"연영철","phone":"821041987170.0","address":"충남 아산시 번영로115번길 20-14 Lk빌딩 5층","latitude":36.786423,"longitude":127.005544,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"newsong07","invited":null,"L":null},
  {"uid":80,"country":"korea","store_name":"보림필방","owner_name":"문상호","phone":"821026052106.0","address":"광주광역시 동구 중앙로 196번길 15-35","latitude":35.150387,"longitude":126.917964,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"bolim420820","invited":null,"L":null},
  {"uid":81,"country":"korea","store_name":"(주)더조은공간","owner_name":"문병영","phone":"821093337400.0","address":"광주광역시 북구 각화대로49","latitude":35.1809,"longitude":126.936229,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"moon1","invited":null,"L":null},
  {"uid":82,"country":"korea","store_name":"프렌즈스크린 비산점","owner_name":"이규현","phone":"821053589370.0","address":"경기 안양시 동안구 평촌대로374번길","latitude":37.404422,"longitude":126.95123,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"verygoodchat ","invited":null,"L":null},
  {"uid":83,"country":"korea","store_name":"눈사랑안경함양점","owner_name":"임영진","phone":"821077271572.0","address":"경남 함양군 함양읍 용평1길19 1층","latitude":35.519127,"longitude":127.729377,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"shkjin3600","invited":null,"L":null},
  {"uid":84,"country":"korea","store_name":"주몽투어","owner_name":"윤영인","phone":"821099862291.0","address":"서울특별시 동대문구 왕산로32길 7 BYC 오피스텔 2212","latitude":37.57872962,"longitude":127.0417962,"logo_url":"https://imgur.com/s6SNXa3","verychat_id":"jumong","invited":null,"L":null},
  {"uid":85,"country":"korea","store_name":"레드우드","owner_name":"이가락","phone":"821053696483.0","address":"강원특별자치도 춘천시 동산면 조양1길 39","latitude":37.74754982,"longitude":127.8030093,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"garak3840","invited":null,"L":null},
  {"uid":86,"country":"korea","store_name":"대마돈가 만천1호점","owner_name":"전종열","phone":"821050268982.0","address":"강원특별자치도 춘천시 동면 만천로81 1층","latitude":37.879805,"longitude":127.764755,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"cheon1113","invited":"garak3840","L":null},
  {"uid":87,"country":"korea","store_name":"연흥","owner_name":"이태연","phone":"821036683522.0","address":"경기도 김포시 대곶면 오니산로 52","latitude":37.667339,"longitude":126.603272,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Yh218480","invited":"garak3840 ","L":null},
  {"uid":88,"country":"korea","store_name":"성남컴퓨터서비스","owner_name":"기종진","phone":"821037639524.0","address":"경기도 성남시 중원구 하대원동 132-6번지 1층 위더스컴퓨터","latitude":37.430283,"longitude":127.150398,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"kjj9524","invited":null,"L":null},
  {"uid":89,"country":"korea","store_name":"위더스 컴퓨터","owner_name":"윤남식","phone":"821082954882.0","address":"경기도 성남시 중원구 둔촌대로 425번길 19, 1층 위더스컴퓨터","latitude":37.434741,"longitude":127.164068,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"withus","invited":"kjj9524","L":null},
  {"uid":90,"country":"korea","store_name":"삽교곱창 하대원점","owner_name":"김미정","phone":"821029822313.0","address":"경기도 성남시 중원구 둔촌대로 287, 105호","latitude":37.43001,"longitude":127.149986,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"kimmijeng","invited":"kjj9524","L":null},
  {"uid":91,"country":"korea","store_name":"지엠에이전트","owner_name":"최환열","phone":"821038663911.0","address":"부산광역시 해운대구 센텀중앙로 90 큐비e센텀 807호","latitude":35.17544308,"longitude":129.126431,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"hwanyul","invited":null,"L":null},
  {"uid":92,"country":"korea","store_name":"부산대박사 태권도","owner_name":"김도호","phone":"821025791304.0","address":"부산광역시 해운대구 좌동순환로217번길19,LIG건영1차아파트상가302호","latitude":35.178004,"longitude":129.180639,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"dojo","invited":null,"L":null},
  {"uid":93,"country":"korea","store_name":"하이컴","owner_name":"김완섭","phone":"821025117456.0","address":"경북 포항시 남구 대도동8-1하이컴(양학천로136번길16)","latitude":36.024659,"longitude":127.8030093,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"Hi123","invited":null,"L":null},
  {"uid":94,"country":"korea","store_name":"기대방수","owner_name":"황보기대","phone":"821042326672.0","address":"경북 포항시 북구 대해로 22 기대방수","latitude":36.02545,"longitude":127.8030093,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"Hi6672","invited":"Hi123","L":null},
  {"uid":95,"country":"korea","store_name":"얌얌","owner_name":"이현수","phone":"821086932832.0","address":"광주광역시 광산구 고봉로 56,4층 402호","latitude":35.182462,"longitude":126.801069,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"dlgustn5400","invited":"dlgustn5400","L":null},
  {"uid":96,"country":"korea","store_name":"수완PC","owner_name":"이현수","phone":"821086932832.0","address":"광주 광산구 장신로 81 1층 101, 102호","latitude":35.19193068,"longitude":126.8182525,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"dlgustn54","invited":null,"L":null},
  {"uid":97,"country":"korea","store_name":"진주한우","owner_name":"이상욱","phone":"821031868676.0","address":"울산광역시 범서읍 장검길69-23 1층 105호 진주한우","latitude":35.551561,"longitude":129.252185,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"2022LEesw","invited":null,"L":null},
  {"uid":98,"country":"korea","store_name":"진주숯불갈비","owner_name":"이상욱","phone":"821031868676.0","address":"울산 남구 평산4길22 1층","latitude":35.57011451,"longitude":129.3387524,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"2022LEesw","invited":"2022LEesw","L":null},
  {"uid":99,"country":"korea","store_name":"베리블리스","owner_name":"박인하","phone":"821090867189.0","address":"대전 동구 충무로 255 103동 1004호","latitude":36.3236239,"longitude":127.4433892,"logo_url":"https://imgur.com/s6SNXa3","verychat_id":"verybliss","invited":null,"L":null},
  {"uid":100,"country":"korea","store_name":"베리블리스 웰빙농부들","owner_name":"박인하","phone":"821090867189.0","address":"충청북도 영동군 영동읍 가리 396번지","latitude":36.185362,"longitude":127.861806,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"verybliss","invited":"verybliss","L":null},
  {"uid":101,"country":"korea","store_name":"전굽는아지매","owner_name":"김기호","phone":"821084380456.0","address":"경남 창원시 진해구 용원로 54-1 1층","latitude":35.09922531,"longitude":128.8150973,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"bigsky1004","invited":null,"L":null},
  {"uid":102,"country":"korea","store_name":"우드픽쳐스","owner_name":"김진영","phone":"821035215698.0","address":"충북 단양군 단양읍 고수동굴길 3-6 ","latitude":36.987807,"longitude":128.381816,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"whomimi","invited":null,"L":null},
  {"uid":103,"country":"korea","store_name":"군산빨간곱창","owner_name":"양수봉","phone":"821099564184.0","address":"대구 달서구 장기로57서길 8","latitude":35.84327353,"longitude":128.5289466,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"first8665","invited":null,"L":null},
  {"uid":104,"country":"korea","store_name":"배곧컴퓨터 다나와 시흥센터","owner_name":"이동건","phone":"821075097500.0","address":"경기 시흥시 서울대학로278번길 8 레드A 311호","latitude":37.3696603,"longitude":126.7265451,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"aza723","invited":null,"L":null},
  {"uid":105,"country":"korea","store_name":"호반","owner_name":"손용호","phone":"821037391021.0","address":"대구광역시 군위군 삼국유사면 삼국유사로 438-32","latitude":36.12445951,"longitude":128.7945702,"logo_url":"https://imgur.com/DwZW4bs","verychat_id":"Taco1011","invited":null,"L":null},
  {"uid":106,"country":"korea","store_name":"서라벌마트","owner_name":"서라벌","phone":"821020367399.0","address":"대전광역시 서구 월평로34번길 13 1층","latitude":36.35556453,"longitude":127.3611442,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"honeybee7","invited":null,"L":null},
  {"uid":107,"country":"korea","store_name":"소장군 황제갈비살","owner_name":"김동원","phone":"821031820595.0","address":"인천광역시 서구 건지로 405 1층","latitude":37.495549,"longitude":126.686437,"logo_url":"https://imgur.com/dA6Up2i","verychat_id":"tkddww","invited":null,"L":null}
];
stores.forEach(store => {
  if (store.logo_url && store.logo_url.includes('imgur.com/')) {
    // https://imgur.com/xxxxxx → https://i.imgur.com/xxxxxx.png 로 바꾸기
    const id = store.logo_url.split('/').pop();
    store.logo_url = `https://i.imgur.com/${id}.png`;
  }
});
// 마커 생성
stores.forEach(store => {
  if (!store.latitude) return;

  const phone = store.phone ? '010-' + store.phone.replace('8210','').replace('.0','').replace(/(\d{3,4})(\d{4})/,'$1-$2') : '미기재';
  const invited = stores.filter(s => s.invited === store.verychat_id);
  const inviteBtn = invited.length > 0 ? `<br><button class="invite-btn" onclick="showInvited('${store.verychat_id}', '${store.store_name}')">초대현황 (${invited.length}명)</button>` : '';

  const logo = store.logo_url ? `<img src="${store.logo_url}" class="logo-img" onerror="this.style.display='none'">` : '';

  const popup = new maptilersdk.Popup({offset: 35, closeButton: true})
    .setHTML(`
      <div style="text-align:center;padding:12px;min-width:240px;">
        ${logo}
        <h3 style="color:#ff3366;margin:10px 0 6px;">${store.store_name}</h3>
        <p style="margin:4px 0;"><b>대표자:</b> ${store.owner_name}</p>
        <p style="margin:4px 0;color:#ff3366;font-weight:bold;">@${store.verychat_id}</p>
        <p style="margin:4px 0;"><b>연락처:</b> ${phone}</p>
        <p style="margin:6px 0;font-size:13px;color:#555;">${store.address}</p>
        ${inviteBtn}
      </div>
    `);

  new maptilersdk.Marker({color: '#ff3366'})
    .setLngLat([store.longitude, store.latitude])
    .setPopup(popup)
    .addTo(map);
});

// 전국 자동 줌
const bounds = new maptilersdk.LngLatBounds();
stores.forEach(s => bounds.extend([s.longitude, s.latitude]));
map.fitBounds(bounds, {padding: 80, maxZoom: 16, duration: 1500});

// 초대현황 모달
window.showInvited = function(id, name) {
  const list = stores.filter(s => s.invited === id);
  let html = `<table style="width:100%;border-collapse:collapse;font-size:14px;">
    <tr style="background:#ff3366;color:white;"><th>번호</th><th>상호명</th><th>대표자</th><th>@ID</th><th>연락처</th><th>주소</th></tr>`;
  list.forEach((s,i) => {
    const p = s.phone ? '010-' + s.phone.replace('8210','').replace('.0','').replace(/(\d{3,4})(\d{4})/,'$1-$2') : '';
    html += `<tr style="text-align:center;">
      <td>${i+1}</td>
      <td>${s.store_name}</td>
      <td>${s.owner_name}</td>
      <td style="color:#ff3366;">@${s.verychat_id}</td>
      <td>${p}</td>
      <td style="font-size:12px;">${s.address}</td>
    </tr>`;
  });
  html += `</table>`;
  document.getElementById('modalTitle').innerText = `${name} 님이 초대한 멤버 (${list.length}명)`;
  document.getElementById('invitedList').innerHTML = html;
  document.getElementById('modalOverlay').style.display = 'flex';
};

// 탭 전환
document.getElementById('tabMap').onclick = () => {
  document.getElementById('map').style.display = 'block';
  document.getElementById('lineupPanel').style.display = 'none';
  document.getElementById('saveBtn').style.display = 'none';
  document.getElementById('modalOverlay').style.display = 'none';
  document.getElementById('tabMap').classList.add('active');
  document.getElementById('tabLineup').classList.remove('active');
};

document.getElementById('tabLineup').onclick = () => {
  document.getElementById('map').style.display = 'none';
  document.getElementById('lineupPanel').style.display = 'block';
  document.getElementById('saveBtn').style.display = 'block';
  document.getElementById('modalOverlay').style.display = 'none';
  document.getElementById('tabMap').classList.remove('active');
  document.getElementById('tabLineup').classList.add('active');
  loadTable();
};

// Lineup 테이블 채우기
function loadTable() {
  const tbody = document.getElementById('tableBody');
  tbody.innerHTML = '';
  stores.forEach((s,i) => {
    const phone = s.phone ? '010-' + s.phone.replace('8210','').replace('.0','').replace(/(\d{3,4})(\d{4})/,'$1-$2') : '';
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td contenteditable>${i+1}</td>
      <td contenteditable>${s.store_name}</td>
      <td contenteditable>${s.owner_name}</td>
      <td contenteditable>${phone}</td>
      <td contenteditable>${s.address}</td>
      <td contenteditable>가입</td>
      <td contenteditable></td>`;
    tbody.appendChild(tr);
  });
}

// 저장하기 (엑셀)
document.getElementById('saveBtn').onclick = () => {
  let csv = ['번호\t상호명\t대표자\t연락처\t주소\t상태\t비고'];
  document.querySelectorAll('#lineupTable tbody tr').forEach(row => {
    let rowData = [];
    row.querySelectorAll('td').forEach(td => rowData.push(td.innerText.trim()));
    csv.push(rowData.join('\t'));
  });
  const blob = new Blob(['\uFEFF' + csv.join('\n')], {type: 'text/csv;charset=utf-8;'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'VeryCrew_Lineup_' + new Date().toISOString().slice(0,10) + '.xls';
  a.click();
  alert('저장 완료!');
};
</script>
</body>
</html>